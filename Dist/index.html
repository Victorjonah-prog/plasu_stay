<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plasu Hostel Booking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body class="bg-gray-100 font-sans">
    
    <nav class="bg-white shadow-lg fixed w-full z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-blue-600">PlasuStay <i class='bx bx-building-house'></i></span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" class="text-gray-700 hover:text-blue-600">Home</a>
                    <a href="#" class="text-gray-700 hover:text-blue-600">About</a>
                    <button onclick="openModal('signupModal')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700" id="signupBtn">Sign Up</button>
                    <button onclick="openModal('loginModal')" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300" id="loginBtn">Log In</button>
                </div>
                <div class="md:hidden">
                    <button id="mobileMenuBtn" class="text-gray-700 focus:outline-none">
                        <i class='bx bx-menu text-2xl'></i>
                    </button>
                </div>
            </div>
            <div id="mobileMenu" class="hidden md:hidden">
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <a href="#" class="block text-gray-700 hover:text-blue-600 py-2">Home</a>
                    <a href="#" class="block text-gray-700 hover:text-blue-600 py-2">About</a>
                    <button onclick="openModal('signupModal')" class="w-full text-left bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700" id="mobileSignupBtn">Sign Up</button>
                    <button onclick="openModal('loginModal')" class="w-full text-left bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 mt-2" id="mobileLoginBtn">Log In</button>
                </div>
            </div>
        </div>
    </nav>

    <div id="mainContent" class="hidden">
        <section class="pt-24 pb-16 bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6">Your Perfect Campus Hostel Awaits!</h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">
                    Affordable, safe, and close to campus. Book your room today and enjoy the ultimate student living experience!
                </p>
                <button onclick="openModal('bookingModal')" class="bg-white text-blue-600 px-6 py-3 rounded-md font-semibold hover:bg-gray-100">Book a Room</button>
            </div>
        </section>
        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-12">Available Rooms</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <img src="./img/plasu4.jpeg" alt="Room" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">Single Room</h3>
                            <p class="text-gray-600 mb-4">Comfortable single room with study desk and Wi-Fi.</p>
                            <p class="text-lg font-bold text-blue-600">&#8358;50.000/month</p>
                            <button onclick="openModal('bookingModal')" class="mt-4 w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Pay for room</button>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <img src="./img/plasu5.jpeg" alt="Room" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">Double Room</h3>
                            <p class="text-gray-600 mb-4">Comfortable single room with study desk and Wi-Fi.</p>
                            <p class="text-lg font-bold text-blue-600">&#8358;100.000/month</p>
                            <button onclick="openModal('bookingModal')" class="mt-4 w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Pay for room</button>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <img src="./img/plasu3.jpeg" alt="Room" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">Staff Quaters</h3>
                            <p class="text-gray-600 mb-4">Comfortable single room with study desk and Wi-Fi.</p>
                            <p class="text-lg font-bold text-blue-600">&#8358;200.000/month</p>
                            <button onclick="openModal('bookingModal')" class="mt-4 w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Book Now</button>
                        </div>
                    </div>
                </div>
            </section>
    </div>

    <!-- Success Alert Modal -->
    <div id="successAlert" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-lg w-full max-w-md mx-4 text-center">
            <div class="mb-4">
                <i class='bx bx-check-circle text-6xl text-green-500'></i>
            </div>
            <h2 class="text-2xl font-bold mb-4 text-green-600">Payment Submitted Successfully!</h2>
            <p class="text-gray-600 mb-6">Your booking and payment have been processed successfully. You will receive a confirmation email shortly.</p>
            <button onclick="closeSuccessAlert()" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700">Continue</button>
        </div>
    </div>

    <div id="signupModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg w-full max-w-md">
            <h2 class="text-2xl font-bold mb-6">Sign Up</h2>
            <form id="signupForm">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="signupName">Name</label>
                    <input type="text" id="signupName" class="w-full px-4 py-2 border rounded-md" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" class="w-full px-4 py-2 border rounded-md" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2" for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" class="w-full px-4 py-2 border rounded-md" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Sign Up</button>
                <button type="button" onclick="closeModal('signupModal')" class="w-full mt-2 text-gray-700">Cancel</button>
            </form>
        </div>
    </div>

    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg w-full max-w-md">
            <h2 class="text-2xl font-bold mb-6">Log In</h2>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" class="w-full px-4 py-2 border rounded-md" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2" for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="w-full px-4 py-2 border rounded-md" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Log In</button>
                <button type="button" onclick="closeModal('loginModal')" class="w-full mt-2 text-gray-700">Cancel</button>
            </form>
        </div>
    </div>

    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg w-full max-w-md">
            <h2 class="text-2xl font-bold mb-6">Book a Room</h2>
            <form id="bookingForm">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="roomType">Room Type</label>
                    <select id="roomType" class="w-full px-4 py-2 border rounded-md" required>
                        <option value="">Select a room</option>
                        <option value="single">Single Room</option>
                        <option value="double">Double Room</option>
                        <option value="mixed">Mixed Room</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="checkIn">Check-in Date</label>
                    <input type="date" id="checkIn" class="w-full px-4 py-2 border rounded-md" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="duration">Duration (Months)</label>
                    <input type="number" id="duration" class="w-full px-4 py-2 border rounded-md" min="1" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2" for="paymentMethod">Payment Method</label>
                    <select id="paymentMethod" class="w-full px-4 py-2 border rounded-md" required>
                        <option value="">Select payment method</option>
                        <option value="bank">Bank Account Transfer</option>
                        <option value="atm">ATM Card</option>
                    </select>
                </div>
                <div id="bankDetails" class="hidden mb-4">
                    <label class="block text-gray-700 mb-2" for="bankAccount">Bank Account Number</label>
                    <input type="text" id="bankAccount" class="w-full px-4 py-2 border rounded-md" placeholder="Enter bank account number">
                </div>
                <div id="atmDetails" class="hidden mb-6">
                    <label class="block text-gray-700 mb-2" for="cardNumber">Card Number</label>
                    <input type="text" id="cardNumber" class="w-full px-4 py-2 border rounded-md" placeholder="Enter 16-digit card number">
                    <div class="flex space-x-4 mt-2">
                        <div class="w-1/2">
                            <label class="block text-gray-700 mb-2" for="expiryDate">Expiry Date</label>
                            <input type="month" id="expiryDate" class="w-full px-4 py-2 border rounded-md">
                        </div>
                        <div class="w-1/2">
                            <label class="block text-gray-700 mb-2" for="cvv">CVV</label>
                            <input type="text" id="cvv" class="w-full px-4 py-2 border rounded-md" placeholder="Enter CVV" maxlength="4">
                        </div>
                    </div>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Submit Booking</button>
                <button type="button" onclick="closeModal('bookingModal')" class="w-full mt-2 text-gray-700">Cancel</button>
            </form>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Plasu Hostel</h3>
                    <p class="text-gray-300">
                        Providing affordable, safe, and comfortable accommodation for students. Book your room today and experience campus life at its best!
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-blue-400">Home</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-blue-400">About Us</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-blue-400">Rooms</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-blue-400">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
                    <p class="text-gray-300 mb-2"><i class='bx bx-envelope mr-2'></i>Email: info@plasuhostel.com</p>
                    <p class="text-gray-300 mb-2"><i class='bx bx-phone mr-2'></i>Phone: +234 915 937 6459</p>
                    <p class="text-gray-300 mb-4"><i class='bx bx-map mr-2'></i>Address: Plateau state universty Campus, Bokkos Plateau state Nigeria</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-blue-400"><i class='bx bxl-facebook text-2xl'></i></a>
                        <a href="#" class="text-gray-300 hover:text-blue-400"><i class='bx bxl-twitter text-2xl'></i></a>
                        <a href="#" class="text-gray-300 hover:text-blue-400"><i class='bx bxl-instagram text-2xl'></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-700 text-center">
                <p class="text-gray-300">&copy; 2025 Plasu Hostel. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Success alert functions
        function showSuccessAlert() {
            document.getElementById('successAlert').classList.remove('hidden');
        }

        function closeSuccessAlert() {
            document.getElementById('successAlert').classList.add('hidden');
        }

        // Save to memory helper function (no localStorage in artifacts)
        let userData = {
            signups: [],
            logins: [],
            bookings: []
        };

        function saveUserData(type, data) {
            userData[type].push(data);
            console.log(`${type} saved:`, data);
        }

        // Check authentication state
        let authState = {
            isSignedUp: false,
            isLoggedIn: false
        };

        function checkAuthState() {
            const mainContent = document.getElementById('mainContent');
            const signupBtn = document.getElementById('signupBtn');
            const loginBtn = document.getElementById('loginBtn');
            const mobileSignupBtn = document.getElementById('mobileSignupBtn');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');

            // Update button states
            if (signupBtn) signupBtn.disabled = authState.isSignedUp;
            if (loginBtn) loginBtn.disabled = !authState.isSignedUp || authState.isLoggedIn;
            if (mobileSignupBtn) mobileSignupBtn.disabled = authState.isSignedUp;
            if (mobileLoginBtn) mobileLoginBtn.disabled = !authState.isSignedUp || authState.isLoggedIn;

            if (!authState.isSignedUp) {
                openModal('signupModal');
            } else if (!authState.isLoggedIn) {
                openModal('loginModal');
            } else {
                mainContent.classList.remove('hidden');
            }
        }

        // Sign Up form submission
        document.getElementById('signupForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const signupData = {
                name: document.getElementById('signupName').value,
                email: document.getElementById('signupEmail').value,
                password: document.getElementById('signupPassword').value,
                timestamp: new Date().toISOString()
            };

            saveUserData('signups', signupData);
            authState.isSignedUp = true;
            
            alert('Sign Up submitted!');
            closeModal('signupModal');
            document.getElementById('signupForm').reset();
            checkAuthState();
        });

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const loginData = {
                email: document.getElementById('loginEmail').value,
                password: document.getElementById('loginPassword').value,
                timestamp: new Date().toISOString()
            };

            saveUserData('logins', loginData);
            authState.isLoggedIn = true;
            
            alert('Log In submitted!');
            closeModal('loginModal');
            document.getElementById('loginForm').reset();
            checkAuthState();
        });

        // Booking form submission with enhanced debugging
        document.getElementById('bookingForm').addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('=== BOOKING FORM SUBMISSION STARTED ===');
            
            // Get all form values
            const roomType = document.getElementById('roomType').value;
            const checkIn = document.getElementById('checkIn').value;
            const duration = document.getElementById('duration').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const bankAccount = document.getElementById('bankAccount').value;
            const cardNumber = document.getElementById('cardNumber').value;
            const expiryDate = document.getElementById('expiryDate').value;
            const cvv = document.getElementById('cvv').value;

            console.log('Form values:', { roomType, checkIn, duration, paymentMethod, bankAccount, cardNumber, expiryDate, cvv });

            // Validate required fields
            if (!roomType || !checkIn || !duration || !paymentMethod) {
                alert('Please fill in all required fields: Room Type, Check-in Date, Duration, and Payment Method.');
                console.log('Validation failed: Missing required fields');
                return;
            }

            // Validate payment details
            let paymentDetails = {};
            if (paymentMethod === 'bank') {
                if (!bankAccount) {
                    alert('Please enter a bank account number.');
                    console.log('Validation failed: Missing bank account');
                    return;
                }
                paymentDetails = { bankAccount };
            } else if (paymentMethod === 'atm') {
                if (!cardNumber || !expiryDate || !cvv) {
                    alert('Please enter all ATM card details (Card Number, Expiry Date, CVV).');
                    console.log('Validation failed: Missing ATM card details');
                    return;
                }
                paymentDetails = { cardNumber, expiryDate, cvv };
            }

            // Create booking data
            const bookingData = {
                roomType,
                checkIn,
                duration,
                paymentMethod,
                paymentDetails,
                timestamp: new Date().toISOString()
            };

            console.log('Booking data created:', bookingData);

            // Save booking data
            saveUserData('bookings', bookingData);
            console.log('Booking data saved successfully');

            // Close modal first
            closeModal('bookingModal');
            console.log('Booking modal closed');

            // Show success alert
            setTimeout(() => {
                showSuccessAlert();
                console.log('Success alert shown');
            }, 100);

            // Reset form
            document.getElementById('bookingForm').reset();
            document.getElementById('bankDetails').classList.add('hidden');
            document.getElementById('atmDetails').classList.add('hidden');
            
            console.log('=== BOOKING FORM SUBMISSION COMPLETED ===');
        });

        // Toggle payment details based on selected method
        document.getElementById('paymentMethod').addEventListener('change', (e) => {
            const bankDetails = document.getElementById('bankDetails');
            const atmDetails = document.getElementById('atmDetails');
            
            // Hide both first
            bankDetails.classList.add('hidden');
            atmDetails.classList.add('hidden');
            
            // Remove required attributes
            document.getElementById('bankAccount').removeAttribute('required');
            document.getElementById('cardNumber').removeAttribute('required');
            document.getElementById('expiryDate').removeAttribute('required');
            document.getElementById('cvv').removeAttribute('required');
            
            // Show relevant section and add required attributes
            if (e.target.value === 'bank') {
                bankDetails.classList.remove('hidden');
                document.getElementById('bankAccount').setAttribute('required', 'required');
            } else if (e.target.value === 'atm') {
                atmDetails.classList.remove('hidden');
                document.getElementById('cardNumber').setAttribute('required', 'required');
                document.getElementById('expiryDate').setAttribute('required', 'required');
                document.getElementById('cvv').setAttribute('required', 'required');
            }
        });

        // Initialize auth flow on page load
        window.onload = () => {
            console.log('Page loaded, initializing auth state');
            checkAuthState();
        };
    </script>
</body>
</html>